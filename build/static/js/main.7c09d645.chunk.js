(this["webpackJsonpdisease-searcher"]=this["webpackJsonpdisease-searcher"]||[]).push([[0],{28:function(e,t,s){},29:function(e,t,s){},31:function(e,t,s){},37:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s(0),c=s.n(a),r=s(20),i=s.n(r),o=(s(28),s(7)),h=s(8),l=s(10),u=s(9),d=s(21),j=s(2),b=(s(29),s(12)),m=s.n(b),p=s(14);function f(){return(f=Object(p.a)(m.a.mark((function e(t,s){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{"https://id.nlm.nih.gov/mesh/sparql?query=","&format=JSON&year=current&limit=50&offset=0&inference=true",n=encodeURIComponent('PREFIX rdf:<http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n            PREFIX rdfs:<http://www.w3.org/2000/01/rdf-schema#>\n\t\t    PREFIX xsd:<http://www.w3.org/2001/XMLSchema#>\n            PREFIX owl:<http://www.w3.org/2002/07/owl#>\n            PREFIX meshv:<http://id.nlm.nih.gov/mesh/vocab#>\n            \n            SELECT ?dId ?mId ?label ?comment\n            FROM <http://id.nlm.nih.gov/mesh>\n            WHERE {\n              ?descriptor a meshv:Descriptor;\n                            meshv:identifier ?dId;\n                            rdfs:label ?label;\n                            meshv:active 1;\n                            meshv:preferredConcept ?concept.\n              ?concept meshv:identifier ?mId;\n                       meshv:scopeNote ?comment.\n              FILTER(REGEX(?label,"'+t+'","i")).\n            }\n            ORDER BY ?dId ?mId'),fetch("https://id.nlm.nih.gov/mesh/sparql?query="+n+"&format=JSON&year=current&limit=50&offset=0&inference=true").then((function(e){return e.json()})).then((function(e){s(e.results.bindings,t)}),(function(e){console.log("Error : ",e)}))}catch(a){console.log("somethin went wrong",a)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}s(31);var v=s.p+"static/media/logo2.103b5fa1.svg",O=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).fetchData=function(t){e.setState({loading:!0}),function(e,t){f.apply(this,arguments)}(t,e.handleResults)},e.handleResults=function(t,s){s===e.state.query&&(e.setState({loading:!1}),e.setState({searchResults:t}))},e.handleInputChange=function(){e.setState({query:e.search.value,searchResults:[]}),""===e.search.value?e.setState({searching:!1}):e.fetchData(e.search.value)},e.handleKeyDown=function(t){"Enter"!==t.key&&"Unidentified"!==t.key||(e.setState({searching:!0}),e.search.blur())},e.handleCheckboxDisease=function(){var t=!e.state.diseaseChecked;e.setState({diseaseChecked:t})},e.handleCheckboxVirus=function(){var t=!e.state.virusChecked;e.setState({virusChecked:t})},e.handleTitleClick=function(){e.setState({searching:!1})},e.handleOptionClick=function(){e.setState({showOptions:!e.state.showOptions}),console.log(e.state.showOptions)},e.state={searchResults:[],query:"",searching:!1,typing:!1,diseaseChecked:!0,virusChecked:!0,showOptions:!1,loading:!1},e}return Object(h.a)(s,[{key:"handleTyping",value:function(e){this.setState({typing:e})}},{key:"render",value:function(){var e,t,s=this;if(this.state.searchResults.length>0){var a=this.state.searchResults.sort((function(e,t){var n=e.label.value.toLowerCase(),a=t.label.value.toLowerCase(),c=s.state.query.toLowerCase(),r=n.indexOf(c),i=a.indexOf(c);return r<i?-1:r>i?1:r===i?0:void 0}));e=a.map((function(e){var t=e.label.value,a=e.comment.value;return t&&!s.state.loading?Object(n.jsxs)("li",{className:"disease",children:[Object(n.jsx)("h2",{children:t.charAt(0).toUpperCase()}),Object(n.jsx)("h3",{children:t}),Object(n.jsx)("p",{children:a.length>=200?a.substring(0,200)+"...":a}),Object(n.jsx)("a",{href:"/disease/"+t,children:Object(n.jsx)("button",{children:"En savoir plus"})})]},t):Object(n.jsx)(c.a.Fragment,{})})),this.state.typing&&""!==this.state.query&&(t=a.slice(0,10).map((function(e){if(e.label){var t=e.label.value.toLowerCase(),a=s.state.query.toLowerCase();return-1!==t.indexOf(a)?(t.split(s.state.query,2),Object(n.jsx)("option",{value:t},t)):Object(n.jsx)("option",{value:t},t)}})))}else{e=[0,1,2,3,4,5,6,7,8,9].map((function(e){return Object(n.jsx)("li",{className:"disease"},e)}))}return Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)("div",{className:"searcher-container",style:this.state.searching?{overflow:"scroll"}:{maxHeight:"100vh",overflow:"hidden"},children:Object(n.jsxs)("div",{className:this.state.searching?"search-header topbar":"search-header",children:[Object(n.jsx)("img",{onClick:this.handleTitleClick,src:v,className:"search-logo",alt:"logo"}),Object(n.jsxs)("div",{className:this.state.searching?"search-text-container topbar":"search-text-container",onClick:this.handleTitleClick,children:[Object(n.jsxs)("h2",{className:"search-title",children:["The ",Object(n.jsx)("br",{}),"Disease",Object(n.jsx)("br",{})," Searcher"]}),Object(n.jsx)("p",{children:"By the HexaOne Team"})]}),Object(n.jsxs)("div",{className:this.state.searching?"autocomplete home-search-bar topbar":"autocomplete home-search-bar",children:[Object(n.jsx)("input",{className:"home-search",type:"text",name:"search",id:"search",value:this.state.value,placeholder:"Rechercher une maladie. ex: coronavirus",autoComplete:"off",list:"suggestion-results",ref:function(e){return s.search=e},onKeyDown:this.handleKeyDown,onChange:this.handleInputChange,onFocus:function(){return s.handleTyping(!0)},onBlur:function(){return s.handleTyping(!0)}}),this.state.loading&&!this.state.searching&&""!==this.state.query?Object(n.jsxs)("div",{className:"lds-ellipsis",children:[Object(n.jsx)("div",{}),Object(n.jsx)("div",{}),Object(n.jsx)("div",{}),Object(n.jsx)("div",{})]}):Object(n.jsx)(c.a.Fragment,{})]})]})}),Object(n.jsx)("datalist",{id:"suggestion-results",onClick:this.handleKeyDown,children:t}),Object(n.jsx)("div",{className:"results-container",children:this.state.searching&&!this.state.loading&&0===this.state.searchResults.length?Object(n.jsx)("h2",{style:{textAlign:"center"},children:"Pas de r\xe9sultats"}):this.state.searching?Object(n.jsx)("ul",{className:"tilesWrap",children:e}):Object(n.jsx)(c.a.Fragment,{})})]})}}]),s}(c.a.Component),g=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={diseaseName:n.props.match.params.diseaseName},n}return Object(h.a)(s,[{key:"render",value:function(){return Object(n.jsx)("h1",{children:this.state.diseaseName})}}]),s}(a.Component),x=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).state={virusName:n.props.match.params.virusName},n}return Object(h.a)(s,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(n.jsx)("h1",{children:this.state.virusName})}}]),s}(c.a.Component),y=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(h.a)(s,[{key:"render",value:function(){return Object(n.jsx)(d.a,{children:Object(n.jsxs)(j.d,{children:[Object(n.jsx)(j.b,{path:"/",component:O,exact:!0}),Object(n.jsx)(j.b,{path:"/virus/:virusName?",component:x,exact:!0}),Object(n.jsx)(j.b,{path:"/disease/:diseaseName",component:g,exact:!0}),Object(n.jsx)(j.a,{to:"/"})]})})}}]),s}(a.Component),w=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,38)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;s(e),n(e),a(e),c(e),r(e)}))};i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(y,{})}),document.getElementById("root")),w()}},[[37,1,2]]]);
//# sourceMappingURL=main.7c09d645.chunk.js.map